(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a8c6f00"],{"30fe":function(t,e,r){"use strict";var s=r("5340"),a=r.n(s);a.a},5340:function(t,e,r){},"54ec":function(t,e,r){},b3b1:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[t.$q.screen.gt.sm?r("div",{staticClass:"col-2"}):t._e(),r("div",{class:t.$q.screen.gt.sm?"col-8":"col-12"},[r("div",{staticClass:"row"},[t._m(0),r("div",{staticClass:"col-12 q-pa-md"},[r("div",{staticClass:"row text-h5"},[t._v(" Cart: ")]),r("div",{staticClass:"row"},[r("q-card",{staticClass:" bg-grey-1",staticStyle:{width:"100%"}},[r("div",{staticClass:"column"},t._l(t.currentCart,(function(e,s){return r("div",{key:s,staticClass:"col q-my-md "},[r("q-card-section",[r("div",{staticClass:"row"},[r("div",{staticClass:"col-xs-4 col-md-2"},[r("img",{staticClass:"rounded-borders",staticStyle:{width:"100px",height:"100px"},attrs:{src:e.product.images[0].img,ratio:1,basic:"","spinner-color":"white"}})]),r("div",{staticClass:"col-xs-8 col-md-10"},[r("div",{staticClass:"row jusitify-between"},[r("div",{staticClass:"col"},[r("div",[t._v("Name: "+t._s(e.product.name))]),r("div",[t._v("Count: "+t._s(e.count))]),r("div",[t._v(" Price of One: "+t._s(e.product.price)+" EGP ")]),r("div",[t._v(" Total Price: "+t._s(e.count*e.product.price)+" EGP ")])]),r("div",{staticClass:"col-shrink "},[r("div",{staticClass:"row items-center",staticStyle:{height:"100%"}},[r("q-btn",{attrs:{color:"red-8",label:t.$q.screen.gt.xs?"Remove Item":"",round:!t.$q.screen.gt.xs,icon:"remove",size:t.$q.screen.gt.xs?"md":"sm"},on:{click:function(e){return t.removeItemFromCart(s)}}})],1)])])])])]),s<t.currentCart.length-1?r("q-separator"):t._e()],1)})),0)]),r("q-card",{staticClass:" bg-grey-1 q-mt-sm",staticStyle:{width:"100%"}},[r("q-card-section",[r("div",{staticClass:"row justify-end items-center"},[r("div",{staticClass:"col-shrink text-weight-bold",class:{"small-font":t.$q.platform.is.mobile}},[t._v(" Total Order Price: "+t._s(t.totalPrice)+" EGP ")]),r("div",{staticClass:"col-shrink q-mx-xs "},[r("q-btn",{attrs:{color:"amber-6",label:"Create Order",size:t.$q.screen.gt.xs?"md":"sm"},on:{click:t.createOrder}})],1)])])],1)],1)])])]),r("q-dialog",{attrs:{persistent:""},model:{value:t.showPayCondition,callback:function(e){t.showPayCondition=e},expression:"showPayCondition"}},[r("q-card",[r("q-card-section",{staticClass:"row items-center"},[r("span",{staticClass:"q-ml-sm"},[t._v("Would you like to pay for your order ?")])]),r("q-card-actions",{attrs:{align:"right"}},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"No , continue browsing",color:"primary"},on:{click:function(e){return t.paymentCardAction(1)}}}),r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Yes",color:"primary"},on:{click:function(e){return t.paymentCardAction(2)}}})],1)],1)],1),r("q-dialog",{attrs:{persistent:""},model:{value:t.showPaymentCard,callback:function(e){t.showPaymentCard=e},expression:"showPaymentCard"}},[r("q-card",{staticStyle:{width:"300px"}},[r("q-card-section",{staticClass:"row items-center"},[r("PaymentCard",{attrs:{currentOrder:this.createdOrder},on:{orderPaymentSuccess:t.paymentCardAction}})],1),r("q-card-actions",{attrs:{align:"right"}},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"cancel",color:"primary"},on:{click:t.stripeCardAction}})],1)],1)],1),t.$q.screen.gt.sm?r("div",{staticClass:"col-2"}):t._e()],1)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-12"},[s("div",{staticClass:"row justify-center"},[s("img",{staticClass:"col-xs-4 col-md-2",attrs:{alt:"bStore ",src:r("cf05")}})])])}],i=(r("4160"),r("159b"),r("96cf"),r("1da1")),c=r("d80e"),n={name:"Cart",components:{PaymentCard:c["a"]},data:function(){return{totalPrice:0,showPayCondition:!1,createdOrder:null,showPaymentCard:!1}},methods:{calculateTotalPrice:function(){var t=0;this.currentCart.forEach((function(e){t+=e.product.price*e.count})),this.totalPrice=t},createOrder:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("createOrder").then((function(e){e.id&&(t.createdOrder=e),t.$q.notify({type:e.status&&"success"==e.status?"positive":"negative",message:e.message?e.message:"Error Occured",timeout:2e3}),e.status&&"success"==e.status&&(t.showPayCondition=!0)}));case 2:case"end":return e.stop()}}),e)})))()},removeItemFromCart:function(t){this.$store.commit("removeFromCart",t),this.calculateTotalPrice()},paymentCardAction:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:2==t?e.showPaymentCard=!0:setTimeout((function(){e.$store.commit("clearCart"),e.$router.push({name:"Products"})})),e.showPayCondition=!1;case 2:case"end":return r.stop()}}),r)})))()},stripeCardAction:function(){this.$store.commit("clearCart"),this.$router.push({name:"Products"}),this.showPaymentCard=!1}},computed:{currentCart:function(){return this.$store.getters.getCart}},created:function(){this.calculateTotalPrice()}},o=n,d=(r("30fe"),r("2877")),l=Object(d["a"])(o,s,a,!1,null,"b5ad0aa4",null);e["default"]=l.exports},cf05:function(t,e,r){t.exports=r.p+"img/logo.4e1760ab.png"},d80e:function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{width:"100%"}},[r("div",{ref:"card"}),r("div",{staticClass:"q-mb-lg"},[t._v("Payment Card")]),r("div",{attrs:{id:"card-element"}}),r("div",[r("button",{staticClass:"payment-button",on:{click:t.submit}},[t._v("Pay")])])])},a=[],i=(r("96cf"),r("1da1")),c={props:{currentOrder:{required:!0,default:""}},data:function(){return{stripeAPIToken:"pk_test_bB4E6BT0ma0UOr8GvpseWiYH00iAF9YnLp",stripe:"",elements:"",card:""}},methods:{configureStripe:function(){this.stripe=Stripe(this.stripeAPIToken),this.elements=this.stripe.elements();var t={base:{color:"#32325d",paddingTop:"15px"}};this.card=this.elements.create("card",{style:t}),this.card.mount("#card-element")},includeStripe:function(t,e){var r=document,s="script",a=r.createElement(s),i=r.getElementsByTagName(s)[0];a.src="//"+t,e&&a.addEventListener("load",(function(t){e(null,t)}),!1),i.parentNode.insertBefore(a,i)},submit:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.preventDefault(),s=e.currentOrder.payment_intent,a=e.$store.getters.getCustomerName,e.$q.loading.show(),r.next=6,e.stripe.confirmCardPayment(s,{payment_method:{card:e.card,billing_details:{name:a}}}).then((function(t){e.$q.loading.hide()})).catch((function(t){e.$q.loading.hide()}));case 6:return r.next=8,e.$store.dispatch("payOrder",{order_id:e.currentOrder.id}).then((function(t){e.$q.notify({type:t.status&&"success"==t.status?"positive":"negative",message:t.message?t.message:"Error Occured",timeout:2e3}),e.$emit("orderPaymentSuccess")}));case 8:case"end":return r.stop()}}),r)})))()}},created:function(){this.includeStripe("js.stripe.com/v3/",function(){this.configureStripe()}.bind(this))}},n=c,o=(r("ed9f"),r("2877")),d=Object(o["a"])(n,s,a,!1,null,"23cfe2ae",null);e["a"]=d.exports},ed9f:function(t,e,r){"use strict";var s=r("54ec"),a=r.n(s);a.a}}]);
//# sourceMappingURL=chunk-6a8c6f00.feabb8bf.js.map