(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d338f8d"],{"234f":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search_field text-center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],staticClass:"input",attrs:{required:"",type:"text"},domProps:{value:t.searchValue},on:{input:[function(e){e.target.composing||(t.searchValue=e.target.value)},function(e){return t.$emit("searchEvent",t.searchValue)}]}}),s("label",[t._v(" "+t._s(t.labelName)+" "),s("span",{staticClass:"border"})]),s("i",{staticClass:"fas fa-search"})])},r=[],c={name:"SearchField",data:function(){return{searchValue:""}},props:{labelName:{type:String,required:!1},items:{type:Array,required:!1,default:function(){return[]}}}},i=c,n=(s("88d4"),s("2877")),o=Object(n["a"])(i,a,r,!1,null,"d131e46c",null);e["a"]=o.exports},3591:function(t,e,s){},"85b0":function(t,e,s){"use strict";var a=s("952a"),r=s.n(a);r.a},"88d4":function(t,e,s){"use strict";var a=s("3591"),r=s.n(a);r.a},"952a":function(t,e,s){},e891:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",[s("div",{staticClass:"row"},[t.$q.screen.gt.sm?s("div",{staticClass:"col-2"}):t._e(),s("div",{class:t.$q.screen.gt.sm?"col-8":"col-12"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 q-pa-md"},[s("div",{staticClass:"row justify-between items-center q-mb-sm"},[s("div",{staticClass:"col-shrink",class:{"text-h5":!t.$q.platform.is.mobile}},[t._v(" All Orders: ")]),s("div",{staticClass:"col-shrink"},[s("SearchField",{attrs:{labelName:"Order Number"},on:{searchEvent:t.searchTextInserted}})],1)]),s("div",{staticClass:"row"},[s("q-card",{staticClass:" bg-grey-1",staticStyle:{width:"100%"}},[s("div",{staticClass:"column"},[s("q-list",{staticClass:"rounded-borders",attrs:{bordered:""}},t._l(t.outputOrders,(function(e,a){return s("div",{key:a},[s("q-expansion-item",{attrs:{"expand-separator":""},scopedSlots:t._u([{key:"header",fn:function(){return[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",{attrs:{icon:e.icon,color:e.color,"text-color":"white"}})],1),s("q-item-section",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-shrink ",class:{"q-pr-sm right-border":!t.$q.platform.is.mobile}},[s("div",{staticClass:"text-subtitle2"},[t._v(" Order Number: #"+t._s(e.id)+" ")]),s("div",{staticClass:"text-caption"},[t._v(" Date: "+t._s(e.creation_date)+" ")]),s("div",{staticClass:"text-caption"},[t._v(" Time: "+t._s(e.creation_time)+" ")])]),s("div",{staticClass:"col-shrink ",class:{"q-ml-sm ":!t.$q.platform.is.mobile}},[s("div",{staticClass:" header"},[t._v("Customer Info:")]),s("div",{staticClass:"data "},[t._v(" Name: "+t._s(e.Customer.first_name)+" "+t._s(e.Customer.last_name)+" ")]),s("div",{staticClass:"data "},[t._v(" ID: "+t._s(e.Customer.id)+" ")])])])]),s("q-item-section",{attrs:{side:""}},[s("div",{class:"text-bold text-"+e.color,attrs:{"background-color":"white"}},[t._v(" "+t._s(e.Status)+" ")])])]},proxy:!0}],null,!0)},[s("q-card",[s("q-card-section",[s("div",{staticClass:"row"},[s("div",{class:t.$q.platform.is.mobile?"Pending"==e.Status?"col-8":"col-12":"Pending"==e.Status?"col-9":"col-12"},[t._l(e.products,(function(a,r){return s("div",{key:r},[s("div",{staticClass:"row",class:{"q-mb-sm":r==e.products.length-1}},[s("div",{staticClass:"col-shrink"},[t._v(" "+t._s(a.count)+" x "+t._s(a.product.name)+" ")]),s("div",{staticClass:"col",staticStyle:{position:"relative"}},[s("div",{staticClass:"dotted-line"})]),s("div",{staticClass:"col-shrink"},[t._v(" "+t._s(a.count*a.product.price)+"EGP ")])])])})),s("div",{staticClass:"row q-mb-sm"},[s("div",{staticClass:"col",staticStyle:{position:"relative"}},[s("div",{staticClass:"dotted-line2"})])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-shrink"},[t._v(" Total Price: ")]),s("div",{staticClass:"col",staticStyle:{position:"relative"}},[s("div",{staticClass:"dotted-line"})]),s("div",{staticClass:"col-shrink"},[t._v(" "+t._s(e.total_price)+" EGP ")])])],2),"Pending"==e.Status?s("div",{class:t.$q.platform.is.mobile?"col-4":"col-3"},[s("div",{staticClass:"column justify-end"},[s("div",{staticClass:"col-12 q-my-sm"},[s("div",{staticClass:"row justify-center"})]),s("div",{staticClass:"col-12"},[s("div",{staticClass:"row justify-center"},[s("q-btn",{attrs:{color:"red-8",label:"Cancel Order",dense:t.$q.platform.is.mobile,size:t.$q.platform.is.mobile?"sm":"md"},on:{click:function(s){return t.cancelOrderClicked(e)}}})],1)])])]):t._e()])])],1)],1),s("q-separator")],1)})),0)],1)])],1)])])]),s("q-dialog",{attrs:{persistent:""},model:{value:t.showCancel,callback:function(e){t.showCancel=e},expression:"showCancel"}},[s("q-card",[s("q-card-section",{staticClass:"row items-center"},[s("span",{staticClass:"q-ml-sm"},[t._v("Are you sure you want to cancel Order #"+t._s(t.selectedOrder.id)+" ?")])]),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"No",color:"primary"},on:{click:function(e){return t.cancelCardAction(1)}}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Yes",color:"primary"},on:{click:function(e){return t.cancelCardAction(2)}}})],1)],1)],1),t.$q.screen.gt.sm?s("div",{staticClass:"col-2"}):t._e()],1)])},r=[],c=(s("4de4"),s("4160"),s("159b"),s("96cf"),s("1da1")),i=s("234f"),n=s("c151"),o={name:"MyOrders",components:{SearchField:i["a"]},data:function(){return{totalPrice:0,showPay:!1,showCancel:!1,createdOrderId:null,currentOrders:[],tempCurrentOrders:[],selectedOrder:{id:0},searchValue:""}},methods:{cancelOrderClicked:function(t){this.selectedOrder=t,this.showCancel=!0},payOrderClicked:function(t){this.selectedOrder=t,this.showPay=!0},paymentCardAction:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(2!=t){s.next=5;break}return s.next=3,e.$store.dispatch("payOrder",e.selectedOrder.id).then((function(t){e.$q.notify({type:t.status&&"success"==t.status?"positive":"negative",message:t.message?t.message:"Error Occured",timeout:2e3})}));case 3:return s.next=5,e.getAllOrders();case 5:e.showPay=!1,e.selectedOrder=null;case 7:case"end":return s.stop()}}),s)})))()},cancelCardAction:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(2!=t){s.next=6;break}return a=e.selectedOrder.id,s.next=4,Object(n["a"])().put("orders/adminCancelOrder/".concat(a)).then((function(t){"success"==t.data.status&&e.$q.notify({type:"positive",message:t.data.message,timeout:2e3})})).catch((function(t){e.$q.notify({type:"negative",message:t.response.data?t.response.data.message:"Error Occured",timeout:2e3})}));case 4:return s.next=6,e.getAllOrders();case 6:e.showCancel=!1,e.selectedOrder={id:0};case 8:case"end":return s.stop()}}),s)})))()},getAllOrders:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(n["a"])().get("orders/getAllOrders").then((function(e){if("success"==e.data.status){var s=e.data.data;s.forEach((function(t){var e=t.created_at,s=e.substring(0,10);t.creation_date=s;var a=e.substring(11,19);t.creation_time=a,t.paid||t.cancelled||(t.Status="Pending",t.color="yellow",t.icon="receipt"),!t.paid&&t.cancelled&&(t.Status="Cancelled",t.color="red",t.icon="close"),t.paid&&!t.cancelled&&(t.Status="Paid",t.color="green",t.icon="check")})),t.tempCurrentOrders=s,t.currentOrders=s}}));case 2:case"end":return e.stop()}}),e)})))()},searchTextInserted:function(t){this.searchValue=t}},computed:{currentCart:function(){return this.$store.getters.getCart},outputOrders:function(){var t=this;return this.tempCurrentOrders.filter((function(e){return!(t.searchValue.length>0)||e.id==t.searchValue}))}},created:function(){this.getAllOrders()}},l=o,d=(s("85b0"),s("2877")),u=Object(d["a"])(l,a,r,!1,null,"76668cbd",null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-1d338f8d.0e7c41ca.js.map