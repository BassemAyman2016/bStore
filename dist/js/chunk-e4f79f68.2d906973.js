(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e4f79f68"],{"234f":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search_field text-center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],staticClass:"input",attrs:{required:"",type:"text"},domProps:{value:t.searchValue},on:{input:[function(e){e.target.composing||(t.searchValue=e.target.value)},function(e){return t.$emit("searchEvent",t.searchValue)}]}}),s("label",[t._v(" "+t._s(t.labelName)+" "),s("span",{staticClass:"border"})]),s("i",{staticClass:"fas fa-search"})])},r=[],c={name:"SearchField",data:function(){return{searchValue:""}},props:{labelName:{type:String,required:!1},items:{type:Array,required:!1,default:function(){return[]}}}},i=c,o=(s("88d4"),s("2877")),n=Object(o["a"])(i,a,r,!1,null,"d131e46c",null);e["a"]=n.exports},3591:function(t,e,s){},"42e5":function(t,e,s){"use strict";var a=s("d609"),r=s.n(a);r.a},"88d4":function(t,e,s){"use strict";var a=s("3591"),r=s.n(a);r.a},a8aa:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",[s("div",{staticClass:"row"},[t.$q.screen.gt.sm?s("div",{staticClass:"col-2"}):t._e(),s("div",{class:t.$q.screen.gt.sm?"col-8":"col-12"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 q-pa-md"},[s("div",{staticClass:"row justify-between items-center q-mb-sm"},[s("div",{staticClass:"col-shrink",class:{"text-h5":!t.$q.platform.is.mobile}},[t._v(" All Customers: ")]),s("div",{staticClass:"col-shrink"},[s("SearchField",{attrs:{labelName:"Search by ID"},on:{searchEvent:t.searchTextInserted}})],1)]),s("div",{staticClass:"row"},[s("q-card",{staticClass:" bg-grey-1",staticStyle:{width:"100%"}},[s("div",{staticClass:"column"},[s("q-list",{staticClass:"rounded-borders",attrs:{bordered:""}},t._l(t.outputCustomers,(function(e,a){return s("div",{key:a},[s("q-expansion-item",{attrs:{"expand-separator":"",disable:"Unconfirmed"==e.Status},scopedSlots:t._u([{key:"header",fn:function(){return[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",{attrs:{icon:"person",color:e.color,"text-color":"white"}})],1),s("q-item-section",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-shrink ",class:{"q-pr-sm right-border":!t.$q.platform.is.mobile}},[s("div",{staticClass:"text-subtitle2"},[t._v(" Name: "+t._s(e.first_name)+" "+t._s(e.last_name)+" ")]),s("div",{staticClass:"text-caption"},[t._v(" ID: "+t._s(e.id)+" ")])])])]),s("q-item-section",{attrs:{side:""}},[s("div",{class:"text-bold text-"+e.color,attrs:{"background-color":"white"}},[t._v(" "+t._s(e.Status)+" ")])])]},proxy:!0}],null,!0)},[s("q-card",[s("q-card-section",[s("div",{staticClass:"row justify-between q-mb-sm"},[s("div",{staticClass:"col-shrink"},[t._v(" Orders: ")]),s("div",{staticClass:"col-shrink"},["Active"==e.Status?s("q-btn",{attrs:{color:"red-8",label:"Deactivate Account",dense:"",size:t.$q.platform.is.mobile?"sm":"md"},on:{click:function(s){return t.deactivateAccountClicked(e)}}}):s("q-btn",{attrs:{color:"green-8",label:"Activate Account",dense:"",size:t.$q.platform.is.mobile?"sm":"md"},on:{click:function(s){return t.activateAccountClicked(e)}}}),s("q-btn",{staticClass:"q-ml-sm",attrs:{color:"red-10",label:"Delete Account",dense:"",size:t.$q.platform.is.mobile?"sm":"md"},on:{click:function(s){return t.deleteAccountClicked(e)}}})],1)]),s("div",{staticClass:"row "},t._l(e.orders,(function(e,a){return s("q-card",{key:a,staticClass:"col-md-3 col-xs-12 bg-grey-1 q-mb-sm"},[s("div",{staticClass:"column"},[s("div",[s("q-expansion-item",{attrs:{"expand-separator":""},scopedSlots:t._u([{key:"header",fn:function(){return[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",{attrs:{icon:e.icon,color:e.color,"text-color":"white"}})],1),s("q-item-section",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-shrink ",class:{"q-pr-sm right-border":!t.$q.platform.is.mobile}},[s("div",{staticClass:"text-subtitle2"},[t._v(" Order Number: #"+t._s(e.id)+" ")]),s("div",{staticClass:"text-caption"},[t._v(" Date: "+t._s(e.creation_date)+" ")]),s("div",{staticClass:"text-caption"},[t._v(" Time: "+t._s(e.creation_time)+" ")])])])])]},proxy:!0}],null,!0)},[s("q-card",[s("q-card-section",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[t._l(e.products,(function(a,r){return s("div",{key:r},[s("div",{staticClass:"row",class:{"q-mb-sm":r==e.products.length-1}},[s("div",{staticClass:"col-shrink"},[t._v(" "+t._s(a.count)+" x "+t._s(a.product.name)+" ")]),s("div",{staticClass:"col",staticStyle:{position:"relative"}},[s("div",{staticClass:"dotted-line"})]),s("div",{staticClass:"col-shrink"},[t._v(" "+t._s(a.count*a.product.price)+"EGP ")])])])})),s("div",{staticClass:"row q-mb-sm"},[s("div",{staticClass:"col",staticStyle:{position:"relative"}},[s("div",{staticClass:"dotted-line2"})])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-shrink"},[t._v(" Total Price: ")]),s("div",{staticClass:"col",staticStyle:{position:"relative"}},[s("div",{staticClass:"dotted-line"})]),s("div",{staticClass:"col-shrink"},[t._v(" "+t._s(e.total_price)+" EGP ")])])],2)])])],1)],1),s("q-separator")],1)])])})),1)])],1)],1),s("q-separator")],1)})),0)],1)])],1)])])]),s("q-dialog",{attrs:{persistent:""},model:{value:t.showActivateCard,callback:function(e){t.showActivateCard=e},expression:"showActivateCard"}},[s("q-card",[s("q-card-section",{staticClass:"row items-center"},[s("span",{staticClass:"q-ml-sm"},[t._v("Are you sure you want to activate "+t._s(t.selectedCustomer.first_name)+"'s Account ?")])]),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"No",color:"primary"},on:{click:function(e){return t.activateCardActionClicked(1)}}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Yes",color:"primary"},on:{click:function(e){return t.activateCardActionClicked(2)}}})],1)],1)],1),s("q-dialog",{attrs:{persistent:""},model:{value:t.showDeactivateCard,callback:function(e){t.showDeactivateCard=e},expression:"showDeactivateCard"}},[s("q-card",[s("q-card-section",{staticClass:"row items-center"},[s("span",{staticClass:"q-ml-sm"},[t._v("Are you sure you want to deactivate "+t._s(t.selectedCustomer.first_name)+"'s Account ?")])]),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"No",color:"primary"},on:{click:function(e){return t.deactivateCardActionClicked(1)}}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Yes",color:"primary"},on:{click:function(e){return t.deactivateCardActionClicked(2)}}})],1)],1)],1),s("q-dialog",{attrs:{persistent:""},model:{value:t.showDeleteCard,callback:function(e){t.showDeleteCard=e},expression:"showDeleteCard"}},[s("q-card",[s("q-card-section",{staticClass:"row items-center"},[s("span",{staticClass:"q-ml-sm"},[t._v("Are you sure you want to completely delete "+t._s(t.selectedCustomer.first_name)+"'s Account ?")])]),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"No",color:"primary"},on:{click:function(e){return t.deleteCardActionClicked(1)}}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Yes",color:"primary"},on:{click:function(e){return t.deleteCardActionClicked(2)}}})],1)],1)],1),t.$q.screen.gt.sm?s("div",{staticClass:"col-2"}):t._e()],1)])},r=[],c=(s("4de4"),s("4160"),s("159b"),s("96cf"),s("1da1")),i=s("c151"),o=s("234f"),n={name:"AllCustomers",components:{SearchField:o["a"]},data:function(){return{allCustomers:[],showCancel:!1,selectedCustomer:{},showDeactivateCard:!1,showActivateCard:!1,showDeleteCard:!1,searchValue:""}},methods:{fetchAllCustomers:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["a"])().get("customers/getAllCustomers").then((function(e){if(e.data.status&&"success"==e.data.status){var s=e.data.data;s.forEach((function(t){t.confirmed&&!t.deleted&&(t.Status="Active",t.color="primary"),t.confirmed||t.deleted||(t.Status="Unconfirmed",t.color="amber-6"),t.deleted&&(t.Status="Deactivated",t.color="red"),t.color||(t.color="grey",t.Status="undefiend"),t.orders.forEach((function(t){var e=t.created_at,s=e.substring(0,10);t.creation_date=s;var a=e.substring(11,19);t.creation_time=a,t.paid||t.cancelled||(t.Status="Pending",t.color="yellow",t.icon="receipt"),!t.paid&&t.cancelled&&(t.Status="Cancelled",t.color="red",t.icon="close"),t.paid&&!t.cancelled&&(t.Status="Paid",t.color="green",t.icon="check")}))})),t.allCustomers=[],setTimeout((function(){t.allCustomers=s}),100)}}));case 2:case"end":return e.stop()}}),e)})))()},deactivateAccountClicked:function(t){this.selectedCustomer=t,this.showDeactivateCard=!0},activateAccountClicked:function(t){this.selectedCustomer=t,this.showActivateCard=!0},deleteAccountClicked:function(t){this.selectedCustomer=t,this.showDeleteCard=!0},deactivateCardActionClicked:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(2!=t){s.next=6;break}return a=e.selectedCustomer.id,s.next=4,Object(i["a"])().delete("admins/deactivateCustomer/".concat(a)).then((function(t){"success"==t.data.status&&e.$q.notify({type:"positive",message:t.data.message,timeout:2e3})})).catch((function(t){e.$q.notify({type:"negative",message:t.response.data?t.response.data.message:"Error Occured",timeout:2e3})}));case 4:return s.next=6,e.fetchAllCustomers();case 6:e.showDeactivateCard=!1;case 7:case"end":return s.stop()}}),s)})))()},activateCardActionClicked:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(2!=t){s.next=6;break}return a=e.selectedCustomer.id,s.next=4,Object(i["a"])().put("admins/activateCustomer/".concat(a)).then((function(t){"success"==t.data.status&&e.$q.notify({type:"positive",message:t.data.message,timeout:2e3})})).catch((function(t){e.$q.notify({type:"negative",message:t.response.data?t.response.data.message:"Error Occured",timeout:2e3})}));case 4:return s.next=6,e.fetchAllCustomers();case 6:e.showActivateCard=!1;case 7:case"end":return s.stop()}}),s)})))()},deleteCardActionClicked:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(2!=t){s.next=6;break}return a=e.selectedCustomer.id,s.next=4,Object(i["a"])().delete("admins/deleteCustomer/".concat(a)).then((function(t){"success"==t.data.status&&e.$q.notify({type:"positive",message:t.data.message,timeout:2e3})})).catch((function(t){e.$q.notify({type:"negative",message:t.response.data?t.response.data.message:"Error Occured",timeout:2e3})}));case 4:return s.next=6,e.fetchAllCustomers();case 6:e.showDeleteCard=!1;case 7:case"end":return s.stop()}}),s)})))()},searchTextInserted:function(t){this.searchValue=t}},computed:{outputCustomers:function(){var t=this;return this.allCustomers.filter((function(e){return!(t.searchValue.length>0)||e.id==t.searchValue}))}},created:function(){this.fetchAllCustomers()}},l=n,d=(s("42e5"),s("2877")),u=Object(d["a"])(l,a,r,!1,null,"60a93496",null);e["default"]=u.exports},d609:function(t,e,s){}}]);
//# sourceMappingURL=chunk-e4f79f68.2d906973.js.map